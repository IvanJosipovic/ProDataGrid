<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:DataGridSample.Models"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.RowDetailsSelectionPage"
             x:DataType="viewModels:RowDetailsSelectionViewModel">
<Grid RowDefinitions="Auto,*">
    <StackPanel Grid.Row="0" Orientation="Vertical" Spacing="4" Margin="0,0,0,8">
      <TextBlock Classes="h2" Text="Row Details Selection"/>
      <TextBlock TextWrapping="Wrap"
                 Text="Select a row to show details. Ctrl+Click the selected row to deselect and collapse the details panel."/>
    </StackPanel>

    <DataGrid Grid.Row="1"
              ItemsSource="{Binding Books}"
              RowDetailsVisibilityMode="VisibleWhenSelected"
              SelectionMode="Extended"
              IsReadOnly="True"
              AutoGenerateColumns="False"
              CanUserAddRows="False"
              CanUserDeleteRows="False">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Title"
                            Binding="{Binding Title}"
                            Width="2*"
                            x:DataType="models:BookDetail"/>
        <DataGridTextColumn Header="In Stock"
                            Binding="{Binding InStock}"
                            Width="120"
                            x:DataType="models:BookDetail"/>
      </DataGrid.Columns>

      <DataGrid.RowDetailsTemplate>
        <DataTemplate x:DataType="models:BookDetail">
          <Border Background="#0A000000" Padding="10">
            <StackPanel Spacing="8">
              <TextBlock Text="{Binding Summary}" TextWrapping="Wrap"/>
              <DataGrid ItemsSource="{Binding Authors}"
                        IsReadOnly="True"
                        AutoGenerateColumns="False"
                        GridLinesVisibility="Horizontal"
                        HeadersVisibility="Column"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False">
                <DataGrid.Columns>
                  <DataGridTextColumn Header="Author"
                                      Binding="{Binding Name}"
                                      Width="2*"
                                      x:DataType="models:AuthorDetail"/>
                  <DataGridTextColumn Header="Contribution"
                                      Binding="{Binding Contribution}"
                                      Width="*"
                                      x:DataType="models:AuthorDetail"/>
                </DataGrid.Columns>
              </DataGrid>
            </StackPanel>
          </Border>
        </DataTemplate>
      </DataGrid.RowDetailsTemplate>
    </DataGrid>
  </Grid>
</UserControl>
